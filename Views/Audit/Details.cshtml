@model CmsTools.Models.CmsAuditLogDetailModel

@{
    ViewData["Title"] = "Audit detail #" + Model.Id;
}

<h2 class="mt-3 mb-3">Audit detail #@Model.Id</h2>

<dl class="row">
    <dt class="col-sm-2">Thời gian (UTC)</dt>
    <dd class="col-sm-10">@Model.CreatedAtUtc.ToString("yyyy-MM-dd HH:mm:ss")</dd>

    <dt class="col-sm-2">User</dt>
    <dd class="col-sm-10">
        @(Model.Username ?? (Model.UserId.HasValue ? ("#" + Model.UserId.Value) : "(null)"))
    </dd>

    <dt class="col-sm-2">Operation</dt>
    <dd class="col-sm-10">
        <span class="badge bg-secondary">@Model.Operation</span>
    </dd>

    <dt class="col-sm-2">Bảng</dt>
    <dd class="col-sm-10">
        <code>
            @Model.ConnectionName /
            @if (!string.IsNullOrEmpty(Model.SchemaName))
            {
                @($"{Model.SchemaName}.")
            }
            @Model.TableName
        </code>
    </dd>

    <dt class="col-sm-2">PK</dt>
    <dd class="col-sm-10">
        @if (!string.IsNullOrEmpty(Model.PrimaryKeyColumn))
        {
            <code>@Model.PrimaryKeyColumn=@Model.PrimaryKeyValue</code>
        }
    </dd>

    <dt class="col-sm-2">IP</dt>
    <dd class="col-sm-10">@Model.IpAddress</dd>

    <dt class="col-sm-2">User-Agent</dt>
    <dd class="col-sm-10">
        <small class="text-muted">@Model.UserAgent</small>
    </dd>
</dl>

<div class="row">
    <div class="col-md-6">
        <h5>Old values</h5>
        <pre class="bg-light p-2 small" style="max-height:400px;overflow:auto;">
@Model.OldValuesJson
        </pre>
    </div>
    <div class="col-md-6">
        <h5>New values</h5>
        <pre class="bg-light p-2 small" style="max-height:400px;overflow:auto;">
@Model.NewValuesJson
        </pre>
    </div>
</div>

<a class="btn btn-secondary mt-3" href="@Url.Action("Index", "Audit")">
    Quay lại
</a>
